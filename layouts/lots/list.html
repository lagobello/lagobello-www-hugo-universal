<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode }}">

<head>
    {{ partial "headers.html" . }}
    {{ partial "custom_headers.html" . }}
</head>

<body>

    <div id="all">

        {{ partial "top.html" . }}

        {{ partial "nav.html" . }}

        {{ partial "breadcrumbs.html" . }}

        <div id="content">
            <div class="container">
                <div class="row">
                    <!-- *** LEFT COLUMN *** -->

                    <div class="col-md-9" id="blog-listing-medium">

                        <div class="row" style="margin-bottom: 20px;">
                            <div class="col-md-12 text-center">
                                <div class="btn-group" role="group" aria-label="Status Filter">
                                    <button type="button" class="btn btn-default filter-btn"
                                        data-filter="all">All</button>
                                    <button type="button" class="btn btn-primary filter-btn active"
                                        data-filter="For Sale">For
                                        Sale</button>
                                    <button type="button" class="btn btn-default filter-btn"
                                        data-filter="Sold">Sold</button>
                                </div>
                            </div>
                        </div>

                        {{ range .Pages }}
                        {{ $status := "Unknown" }}
                        {{ $statusColor := "default" }}
                        {{ $category := "Other" }}

                        {{ if .Params.offers }}
                        {{ if eq .Params.offers.availability "https://schema.org/InStock" }}
                        {{ $status = "Available" }}
                        {{ $statusColor = "success" }}
                        {{ $category = "For Sale" }}
                        {{ else if eq .Params.offers.availability "https://schema.org/Sold" }}
                        {{ $status = "Sold" }}
                        {{ $statusColor = "danger" }}
                        {{ $category = "Sold" }}
                        {{ end }}
                        {{ else }}
                        {{ if in .Params.description "status: Reserved" }}
                        {{ $status = "Reserved" }}
                        {{ $statusColor = "warning" }}
                        {{ $category = "Reserved" }}
                        {{ else if in .Params.description "status: Under Contract" }}
                        {{ $status = "Under Contract" }}
                        {{ $statusColor = "warning" }}
                        {{ $category = "Under Contract" }}
                        {{ end }}
                        {{ end }}

                        <div class="col-md-4 col-sm-6 lot-item" data-category="{{ $category }}">
                            <div class="box-image-text blog">
                                <div class="top">
                                    <div class="image" style="overflow: hidden; height: 200px;">
                                        <div class="ribbon-holder">
                                            <div class="ribbon {{ $statusColor }}">{{ $status }}</div>
                                            <a href="{{ .Permalink }}">
                                                {{ $slug := .Title | urlize }}
                                                {{ $localImg := printf "img/lots/%s.jpg" $slug }}
                                                {{ $hasLocalImg := fileExists (printf "static/%s" $localImg) }}

                                                {{ if $hasLocalImg }}
                                                <img src="/{{ $localImg }}" class="img-responsive" alt="{{ .Title }}"
                                                    style="width: 100%; height: 100%; object-fit: cover;">
                                                {{ else }}
                                                {{ $streetViewUrl := "" }}
                                                {{ if and .Params.geo .Site.Params.googleMapsApiKey }}
                                                {{ $lat := .Params.geo.latitude }}
                                                {{ $lng := .Params.geo.longitude }}
                                                {{ $streetViewUrl = printf
                                                "https://maps.googleapis.com/maps/api/streetview?size=600x400&location=%f,%f&fov=90&pitch=0&return_error_code=true&key=%s"
                                                $lat $lng .Site.Params.googleMapsApiKey }}
                                                {{ end }}

                                                {{ if $streetViewUrl }}
                                                <img src="{{ $streetViewUrl }}" class="img-responsive"
                                                    alt="Street View of {{ .Title }}"
                                                    onerror="this.onerror=null;this.src='/img/placeholder-home.png';"
                                                    style="width: 100%; height: 100%; object-fit: cover;">
                                                {{ else if .Params.image }}
                                                <img src="{{ index .Params.image 0 }}" class="img-responsive"
                                                    alt="{{ .Title }}"
                                                    style="width: 100%; height: 100%; object-fit: cover;">
                                                {{ else }}
                                                <img src="{{ " img/placeholder.png" | relURL }}" class="img-responsive"
                                                    alt="" style="width: 100%; height: 100%; object-fit: cover;">
                                                {{ end }}
                                                {{ end }}
                                            </a>
                                        </div>
                                        <div class="bg"></div>
                                        <div class="text">
                                            <p class="buttons">
                                                <a href="{{ .Permalink }}"
                                                    class="btn btn-template-transparent-primary"><i
                                                        class="fas fa-link"></i> Read more</a>
                                            </p>
                                        </div>
                                    </div>
                                    <div class="content">
                                        <h4><a href="{{ .Permalink }}">{{ .Title }}</a></h4>
                                        <p class="author-category">
                                            {{ if .Params.offers.price }}
                                            <span class="text-primary" style="font-weight: bold; font-size: 1.2em;">${{
                                                .Params.offers.price }}</span>
                                            {{ else }}
                                            <span class="text-muted">Price upon request</span>
                                            {{ end }}
                                        </p>
                                        <p class="intro">
                                            {{ $closeTo := .Params.close_to }}
                                            {{ $size := .Params.size_sqft }}
                                            Build Your {{ if or (eq $closeTo "Lake") (eq $closeTo "Canal") }}Waterfront
                                            Dream{{ else }}Dreamhouse{{ end }} in {{ .Params.subdivision }} â€“ Over {{
                                            printf "%.0f" (float (default 0 $size)) }} Sq. Ft.
                                        </p>
                                        <p class="read-more">
                                            <a href="{{ .Permalink }}" class="btn btn-template-main">View Details</a>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {{ end }}

                    </div>
                    <!-- /.col-md-9 -->

                    <!-- *** LEFT COLUMN END *** -->

                    <!-- *** RIGHT COLUMN *** -->

                    <div class="col-md-3">

                        <!-- *** MENUS AND WIDGETS *** -->

                        <div class="panel panel-default sidebar-menu">
                            <div class="panel-heading">
                                <h3 class="panel-title">Contact</h3>
                            </div>
                            <div class="panel-body">
                                <p>Interested in a lot?</p>
                                <a href="/contact/" class="btn btn-template-main">Contact Us</a>
                            </div>
                        </div>

                        <!-- *** MENUS AND FILTERS END *** -->

                    </div>
                    <!-- /.col-md-3 -->

                    <!-- *** RIGHT COLUMN END *** -->

                </div>
                <!-- /.row -->
            </div>
            <!-- /.container -->
        </div>
        <!-- /#content -->

        {{ partial "footer.html" . }}

    </div>
    <!-- /#all -->

    {{ partial "scripts.html" . }}

</body>

</html>